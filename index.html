<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ—¥è¯­å•è¯å°å¡ç‰‡</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            color: var(--text-color);
            padding: 20px;
            box-sizing: border-box;
        }

        header {
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        /* å¡ç‰‡ä¸»ä½“åŒºåŸŸ */
        .card-container {
            background-color: var(--card-bg);
            width: 100%;
            max-width: 400px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 30px 20px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 300px;
            justify-content: center;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .card-container:active {
             transform: scale(0.98);
        }

        /* å•è¯æ˜¾ç¤º */
        .word-display {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 20px;
            word-break: keep-all;
        }

        /* ç­”æ¡ˆåŒºåŸŸ (ç½—é©¬éŸ³å’Œä¸­æ–‡) */
        .answer-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
            opacity: 0; /* é»˜è®¤éšè— */
            transition: opacity 0.3s ease;
        }

        .answer-section.show {
            opacity: 1; /* æ˜¾ç¤º */
        }

        .romaji {
            font-size: 1.2rem;
            color: #666;
            font-family: 'Courier New', Courier, monospace;
        }

        .meaning {
            font-size: 1.5rem;
            color: var(--primary-color);
            font-weight: 500;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #eee;
        }

        /* å‘éŸ³æŒ‰é’® */
        .speak-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #e1effe;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--primary-color);
            font-size: 1.2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .speak-btn:active {
             background: #d0e3fc;
        }

        /* åº•éƒ¨æ§åˆ¶æŒ‰é’® */
        .controls {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            width: 100%;
            max-width: 400px;
        }

        .btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .btn-outline {
            background-color: white;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn:active {
            opacity: 0.8;
        }

        .tips {
            margin-top: 15px;
            font-size: 0.8rem;
            color: #999;
        }
    </style>
</head>
<body>

<header>ğŸ“… æ—¥è¯­æ¯æ—¥ä¸€è¯</header>

<main class="card-container" id="cardArea" onclick="toggleAnswer()">
    <button class="speak-btn" onclick="event.stopPropagation(); speakCurrentWord()">ğŸ”Š</button>
    
    <div class="word-display" id="wordText"></div>
    
    <div class="answer-section" id="answerArea">
        <div class="romaji" id="romajiText"></div>
        <div class="meaning" id="meaningText"></div>
    </div>
</main>

<div class="tips">ğŸ‘† ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹ç­”æ¡ˆï¼Œç‚¹å‡»å–‡å­å‘éŸ³</div>

<div class="controls">
    <button class="btn btn-outline" onclick="prevWord()">ä¸Šä¸€ä¸ª</button>
    <button class="btn btn-primary" onclick="nextWord()">ä¸‹ä¸€ä¸ª (éšæœº)</button>
</div>

<script>
    // ===========================
    // 1. æ•°æ®å‡†å¤‡ (ä½ å¯ä»¥éšæ„æ·»åŠ æ›´å¤šå•è¯)
    // ===========================
    const vocabularyList = [
        { word: "ã“ã‚“ã«ã¡ã¯", romaji: "konnichiwa", meaning: "ä½ å¥½" },
        { word: "ã‚ã‚ŠãŒã¨ã†", romaji: "arigatou", meaning: "è°¢è°¢" },
        { word: "ã•ã‚ˆã†ãªã‚‰", romaji: "sayounara", meaning: "å†è§" },
        { word: "çŒ« (ã­ã“)", romaji: "neko", meaning: "çŒ«" },
        { word: "çŠ¬ (ã„ã¬)", romaji: "inu", meaning: "ç‹—" },
        { word: "ç¾å‘³ã—ã„ (ãŠã„ã—ã„)", romaji: "oishii", meaning: "å¥½åƒçš„" },
        { word: "å‹‰å¼· (ã¹ã‚“ãã‚‡ã†)", romaji: "benkyou", meaning: "å­¦ä¹ " },
        { word: "é›£ã—ã„ (ã‚€ãšã‹ã—ã„)", romaji: "muzukashii", meaning: "å›°éš¾çš„" },
        { word: "æ˜æ—¥ (ã‚ã—ãŸ)", romaji: "ashita", meaning: "æ˜å¤©" },
        { word: "æ„›ã—ã¦ã‚‹ (ã‚ã„ã—ã¦ã‚‹)", romaji: "aishiteru", meaning: "æˆ‘çˆ±ä½ " }
    ];

    // ===========================
    // 2. çŠ¶æ€ç®¡ç†
    // ===========================
    let currentIndex = 0; // å½“å‰æ˜¾ç¤ºçš„å•è¯ç´¢å¼•
    let isAnswerVisible = false; // ç­”æ¡ˆæ˜¯å¦å¯è§

    // è·å– DOM å…ƒç´ 
    const wordTextEl = document.getElementById('wordText');
    const romajiTextEl = document.getElementById('romajiText');
    const meaningTextEl = document.getElementById('meaningText');
    const answerAreaEl = document.getElementById('answerArea');

    // ===========================
    // 3. æ ¸å¿ƒå‡½æ•°
    // ===========================

    // åˆå§‹åŒ–é¡µé¢
    function init() {
        // åˆå§‹éšæœºæ‰“ä¹±ä¸€ä¸‹é¡ºåºï¼Œè®©æ¯æ¬¡æ‰“å¼€éƒ½ä¸ä¸€æ ·
        shuffleArray(vocabularyList);
        renderCard();
    }

    // æ¸²æŸ“å¡ç‰‡å†…å®¹
    function renderCard() {
        const currentWordData = vocabularyList[currentIndex];
        wordTextEl.textContent = currentWordData.word;
        romajiTextEl.textContent = `[ ${currentWordData.romaji} ]`;
        meaningTextEl.textContent = currentWordData.meaning;

        // é‡ç½®ç­”æ¡ˆä¸ºéšè—çŠ¶æ€
        isAnswerVisible = false;
        answerAreaEl.classList.remove('show');
    }

    // åˆ‡æ¢ç­”æ¡ˆçš„æ˜¾ç¤º/éšè—
    function toggleAnswer() {
        isAnswerVisible = !isAnswerVisible;
        if (isAnswerVisible) {
            answerAreaEl.classList.add('show');
            // è‡ªåŠ¨å‘éŸ³ (å¯é€‰ï¼Œå¦‚æœä¸å–œæ¬¢è‡ªåŠ¨å‘éŸ³å¯ä»¥æ³¨é‡Šæ‰ä¸‹é¢è¿™è¡Œ)
            // speakCurrentWord(); 
        } else {
            answerAreaEl.classList.remove('show');
        }
    }

    // ä¸‹ä¸€ä¸ªå•è¯ (è¿™é‡Œé‡‡ç”¨äº†éšæœºæ¨¡å¼ï¼Œæœ‰åŠ©äºè®°å¿†)
    function nextWord() {
        // ç®€å•åœ°éšæœºå–ä¸‹ä¸€ä¸ªï¼Œå¯èƒ½ä¼šé‡å¤ï¼Œé€‚åˆåˆ·è¯
        currentIndex = Math.floor(Math.random() * vocabularyList.length);
        // å¦‚æœæƒ³è¦é¡ºåºæ’­æ”¾ï¼Œç”¨ä¸‹é¢è¿™è¡Œä»£æ›¿ä¸Šé¢é‚£è¡Œï¼š
        // currentIndex = (currentIndex + 1) % vocabularyList.length; 
        renderCard();
    }

    // ä¸Šä¸€ä¸ªå•è¯
    function prevWord() {
        currentIndex = (currentIndex - 1 + vocabularyList.length) % vocabularyList.length;
        renderCard();
    }

    // å‘éŸ³åŠŸèƒ½ (ä½¿ç”¨æµè§ˆå™¨å†…ç½®çš„ SpeechSynthesis API)
    function speakCurrentWord() {
        const text = vocabularyList[currentIndex].word;
        
        // æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒ
        if ('speechSynthesis' in window) {
            const utterance = new SpeechSynthesisUtterance(text);
            // é‡è¦ï¼šè®¾ç½®è¯­è¨€ä¸ºæ—¥è¯­
            utterance.lang = 'ja-JP'; 
            // å¯ä»¥è°ƒæ•´è¯­é€Ÿ (0.1 - 10, é»˜è®¤ 1)
            utterance.rate = 0.9; 
            window.speechSynthesis.speak(utterance);
        } else {
            alert("æŠ±æ­‰ï¼Œæ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ–‡æœ¬è½¬è¯­éŸ³åŠŸèƒ½ã€‚è¯·å°è¯•ä½¿ç”¨ Chrome æˆ– Safariã€‚");
        }
    }

    // å·¥å…·å‡½æ•°ï¼šæ•°ç»„æ´—ç‰Œ (Fisher-Yates Shuffle)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // ===========================
    // 4. å¯åŠ¨
    // ===========================
    // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œåˆå§‹åŒ–
    window.addEventListener('DOMContentLoaded', init);

</script>
</body>
</html>
